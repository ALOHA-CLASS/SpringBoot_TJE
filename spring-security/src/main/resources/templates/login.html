<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인</title>
</head>
<body>
    <h1>로그인</h1>
    <form action="/loginPro" method="post">
        <!--
            CSRF Token 이란?
            * CSRF (Cross Site Request Forgery) - 사이트간 요청 위조
            
            - 클라이언트에서 보낸 요청이 실제 서버에서 허용한 요청인지 확인하는 토큰
            - 서버에서 뷰페이지를 응답할 때, 토큰을 세션에 미리 저장
            - 서버에서 허용한 요청인지 확인할 수 있는 임의로 생성된 문자열
            * 로그인 요청 시, 해당 토큰과 함께 요청하면 서버가 허용된 요청인 것을 확인할 수 있다.
            ( 403 Forbidden 응답에러가 발생하지 않는다. )
            403 : 클라리언트가 요청한 자원에 대한 권한이 없은 상태, 서비스 거부
        -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <table>
            <tr>
                <td>아이디</td>
                <td>
                    <!-- <input type="text" name="username" placeholder="아이디"> -->
                    <input type="text" name="id" placeholder="아이디" th:value="${userId}">
                </td>
            </tr>
            <tr>
                <td>비밀번호</td>
                <td>
                    <!-- <input type="password" name="password" placeholder="비밀번호"> -->
                    <input type="password" name="pw" placeholder="비밀번호">
                </td>
            </tr>
            <tr>
                <td>
                    <th:block th:if="${rememberId}">    <!-- ✅ -->
                        <input type="checkbox" name="remember-id" id="remember-id" checked>
                    </th:block>
                    <th:block th:if="${!rememberId}">   <!-- ❌ -->
                        <input type="checkbox" name="remember-id" id="remember-id" >
                    </th:block>
                    <label for="remember-id">아이디 저장</label>
                </td>
                <td>
                    <!-- 자동로그인(Remember-Md) 기능 -->
                    <!-- remember-me 요청 파라미터로 자동 로그인 여부를 전달 -->
                    <input type="checkbox" name="remember-me" id="remember-me">
                    <label for="remember-me">자동 로그인</label>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input type="submit" value="로그인">
                </td>
            </tr>
        </table>
    </form>
</body>
</html>